"use strict";/* convert images into FOLD file format.
more info at https://github.com/robbykraft/tofold
more info on the FOLD format https://github.com/edemaine/fold
(c) Robby Kraft, MIT License */require("core-js/modules/es6.array.sort"),require("core-js/modules/es6.regexp.search"),require("core-js/modules/es6.regexp.split"),require("core-js/modules/es6.regexp.match"),require("core-js/modules/es6.regexp.replace"),require("core-js/modules/es6.regexp.to-string"),require("core-js/modules/web.dom.iterable"),require("core-js/modules/es7.symbol.async-iterator"),require("core-js/modules/es6.symbol"),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.tofold=t()}(void 0,function(){'use strict';var M=Math.tan,C=Math.acos,F=Math.min,V=Math.max,z=Math.PI,X=Math.sin,R=Math.cos,W=Math.sqrt,B=Math.pow,Y=Math.abs;function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return i(e)||n(e)||s()}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){return d(e)||a(e)||c()}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(e){var t=[];return e.replace(ee,function(e,i,n){var s=i.toLowerCase();for(n=l(n),"m"===s&&2<n.length&&(t.push([i].concat(n.splice(0,2))),s="l",i="m"===i?"l":"L");0<=n.length;){if(n.length===$[s])return n.unshift(i),t.push(n);if(n.length<$[s])throw new Error("malformed path data");t.push([i].concat(n.splice(0,$[s])))}}),t}function l(e){var t=e.match(te);return t?t.map(Number):[]}function o(e,t,i,n,s,r,d,a){return new h(e,t,i,n,s,r,d,a)}function h(e,t,i,n,s,r,d,a){this.a={x:e,y:t},this.b={x:i,y:n},this.c={x:s,y:r},this.d={x:d,y:a},null!==d&&void 0!==d&&null!==a&&void 0!==a?(this.getArcLength=k,this.getPoint=v,this.getDerivative=f):(this.getArcLength=y,this.getPoint=m,this.getDerivative=u),this.init()}function u(e,i,n){return{x:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1]),y:2*(1-n)*(i[1]-i[0])+2*n*(i[2]-i[1])}}function f(e,i,n){var t=m([3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],[3*(i[1]-i[0]),3*(i[2]-i[1]),3*(i[3]-i[2])],n);return t}function p(e,i,n,s,r){for(var d=1,a=e/i,c=(e-n(s,r,a))/i,g=0;.001<d;){var l=n(s,r,a+c),o=n(s,r,a-c),h=Y(e-l)/i,u=Y(e-o)/i;if(h<d?(d=h,a+=c):u<d?(d=u,a-=c):c/=2,g++,500<g)break}return a}function m(e,i,n){var t=(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2],s=(1-n)*(1-n)*i[0]+2*(1-n)*n*i[1]+n*n*i[2];return{x:t,y:s}}function v(e,i,n){var t=(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3],s=(1-n)*(1-n)*(1-n)*i[0]+3*(1-n)*(1-n)*n*i[1]+3*(1-n)*n*n*i[2]+n*n*n*i[3];return{x:t,y:s}}function y(e,i,n){var s=Math.log;void 0===n&&(n=1);var r=e[0]-2*e[1]+e[2],d=i[0]-2*i[1]+i[2],a=2*e[1]-2*e[0],c=2*i[1]-2*i[0],g=4*(r*r+d*d);if(0===g)return n*W(B(e[2]-e[0],2)+B(i[2]-i[0],2));var l=4*(r*a+d*c)/(2*g),o=n+l,h=(a*a+c*c)/g-l*l,u=0<o*o+h?W(o*o+h):0,f=0<l*l+h?W(l*l+h):0,p=0===l+W(l*l+h)?0:h*s(Y((o+u)/(l+f)));return W(g)/2*(o*u-l*f+p)}function _(e,t){return se[e][t]}function x(e,i,t){var s,r,d,a=t.length-1;if(0==a)return 0;if(0===e){for(r=0,d=0;d<=a;d++)r+=_(a,d)*B(1-i,a-d)*B(i,d)*t[d];return r}for(s=Array(a),d=0;d<a;d++)s[d]=a*(t[d+1]-t[d]);return x(e-1,i,s)}function b(e,i,n){var t=x(1,n,e),s=x(1,n,i);return W(t*t+s*s)}function k(e,n,s){var r,d,a,c;void 0===s&&(s=1);for(r=s/2,d=0,a=0;20>a;a++)c=r*ie[20][a]+r,d+=ne[20][a]*b(e,n,c);return r*d}function A(e,t,i,n,s,r,d,a,c){return new L(e,t,i,n,s,r,d,a,c)}function L(e,i,n,s,r,d,a,c,g){this.x0=e,this.y0=i,this.rx=n,this.ry=s,this.xAxisRotate=r,this.LargeArcFlag=d,this.SweepFlag=a,this.x1=c,this.y1=g;var t=S(300,function(l){return E({x:e,y:i},n,s,r,d,a,{x:c,y:g},l)});this.length=t.arcLength}function E(e,i,n,s,r,d,a,c){i=Y(i),n=Y(n),s=P(s,360);var t=w(s);if(e.x===a.x&&e.y===a.y)return e;if(0===i||0===n)return this.pointOnLine(e,a,c);var g=(e.x-a.x)/2,l=(e.y-a.y)/2,o={x:R(t)*g+X(t)*l,y:-X(t)*g+R(t)*l},h=B(o.x,2)/B(i,2)+B(o.y,2)/B(n,2);1<h&&(i=W(h)*i,n=W(h)*n);var u=B(i,2)*B(n,2)-B(i,2)*B(o.y,2)-B(n,2)*B(o.x,2),f=B(i,2)*B(o.y,2)+B(n,2)*B(o.x,2),p=u/f;p=0>p?0:p;var m=(r===d?-1:1)*W(p),v={x:m*(i*o.y/n),y:m*(-(n*o.x)/i)},y={x:R(t)*v.x-X(t)*v.y+(e.x+a.x)/2,y:X(t)*v.x+R(t)*v.y+(e.y+a.y)/2},_={x:(o.x-v.x)/i,y:(o.y-v.y)/n},x=O({x:1,y:0},_),b={x:(-o.x-v.x)/i,y:(-o.y-v.y)/n},k=O(_,b);!d&&0<k?k-=2*z:d&&0>k&&(k+=2*z),k%=2*z;var A=x+k*c,L=i*R(A),E=n*X(A),S={x:R(t)*L-X(t)*E+y.x,y:X(t)*L+R(t)*E+y.y};return S.ellipticalArcStartAngle=x,S.ellipticalArcEndAngle=x+k,S.ellipticalArcAngle=A,S.ellipticalArcCenter=y,S.resultantRx=i,S.resultantRy=n,S}function S(e,n){e=e?e:500;for(var s,r,d=0,a=[],c=[],g=n(0),l=0;l<e;l++)r=j(l*(1/e),0,1),s=n(r),d+=T(g,s),c.push([g,s]),a.push({t:r,arcLength:d}),g=s;return s=n(1),c.push([g,s]),d+=T(g,s),a.push({t:1,arcLength:d}),{arcLength:d,arcLengthMap:a,approximationLines:c}}function P(e,t){return(e%t+t)%t}function w(e){return e*(z/180)}function T(e,t){return W(B(t.x-e.x,2)+B(t.y-e.y,2))}function j(e,t,i){return F(V(e,t),i)}function O(e,t){var i=e.x*t.x+e.y*t.y,s=W((B(e.x,2)+B(e.y,2))*(B(t.x,2)+B(t.y,2))),n=0>e.x*t.y-e.y*t.x?-1:1,r=n*C(i/s);return r}function N(e,t,i,n){return new q(e,t,i,n)}function q(e,t,i,n){this.x0=e,this.x1=t,this.y0=i,this.y1=n}function D(e){function t(e){if(!e)return null;for(var d,a,c=g(e),l=[0,0],h=[0,0],u=0;u<c.length;u++)"M"===c[u][0]?(l=[c[u][1],c[u][2]],a=[l[0],l[1]],r.push(null)):"m"===c[u][0]?(l=[c[u][1]+l[0],c[u][2]+l[1]],a=[l[0],l[1]],r.push(null)):"L"===c[u][0]?(n+=W(B(l[0]-c[u][1],2)+B(l[1]-c[u][2],2)),r.push(new N(l[0],c[u][1],l[1],c[u][2])),l=[c[u][1],c[u][2]]):"l"===c[u][0]?(n+=W(B(c[u][1],2)+B(c[u][2],2)),r.push(new N(l[0],c[u][1]+l[0],l[1],c[u][2]+l[1])),l=[c[u][1]+l[0],c[u][2]+l[1]]):"H"===c[u][0]?(n+=Y(l[0]-c[u][1]),r.push(new N(l[0],c[u][1],l[1],l[1])),l[0]=c[u][1]):"h"===c[u][0]?(n+=Y(c[u][1]),r.push(new N(l[0],l[0]+c[u][1],l[1],l[1])),l[0]=c[u][1]+l[0]):"V"===c[u][0]?(n+=Y(l[1]-c[u][1]),r.push(new N(l[0],l[0],l[1],c[u][1])),l[1]=c[u][1]):"v"===c[u][0]?(n+=Y(c[u][1]),r.push(new N(l[0],l[0],l[1],l[1]+c[u][1])),l[1]=c[u][1]+l[1]):"z"===c[u][0]||"Z"===c[u][0]?(n+=W(B(a[0]-l[0],2)+B(a[1]-l[1],2)),r.push(new N(l[0],a[0],l[1],a[1])),l=[a[0],a[1]]):"C"===c[u][0]?(d=new o(l[0],l[1],c[u][1],c[u][2],c[u][3],c[u][4],c[u][5],c[u][6]),n+=d.getTotalLength(),l=[c[u][5],c[u][6]],r.push(d)):"c"===c[u][0]?(d=new o(l[0],l[1],l[0]+c[u][1],l[1]+c[u][2],l[0]+c[u][3],l[1]+c[u][4],l[0]+c[u][5],l[1]+c[u][6]),0<d.getTotalLength()?(n+=d.getTotalLength(),r.push(d),l=[c[u][5]+l[0],c[u][6]+l[1]]):r.push(new N(l[0],l[0],l[1],l[1]))):"S"===c[u][0]?(d=0<u&&-1<["C","c","S","s"].indexOf(c[u-1][0])?new o(l[0],l[1],2*l[0]-c[u-1][c[u-1].length-4],2*l[1]-c[u-1][c[u-1].length-3],c[u][1],c[u][2],c[u][3],c[u][4]):new o(l[0],l[1],l[0],l[1],c[u][1],c[u][2],c[u][3],c[u][4]),n+=d.getTotalLength(),l=[c[u][3],c[u][4]],r.push(d)):"s"===c[u][0]?(d=0<u&&-1<["C","c","S","s"].indexOf(c[u-1][0])?new o(l[0],l[1],l[0]+d.d.x-d.c.x,l[1]+d.d.y-d.c.y,l[0]+c[u][1],l[1]+c[u][2],l[0]+c[u][3],l[1]+c[u][4]):new o(l[0],l[1],l[0],l[1],l[0]+c[u][1],l[1]+c[u][2],l[0]+c[u][3],l[1]+c[u][4]),n+=d.getTotalLength(),l=[c[u][3]+l[0],c[u][4]+l[1]],r.push(d)):"Q"===c[u][0]?(d=l[0]==c[u][1]&&l[1]==c[u][2]?new N(c[u][1],c[u][3],c[u][2],c[u][4]):new o(l[0],l[1],c[u][1],c[u][2],c[u][3],c[u][4]),n+=d.getTotalLength(),r.push(d),l=[c[u][3],c[u][4]],h=[c[u][1],c[u][2]]):"q"===c[u][0]?(d=0==c[u][1]&&0==c[u][2]?new N(l[0]+c[u][1],l[0]+c[u][3],l[1]+c[u][2],l[1]+c[u][4]):new o(l[0],l[1],l[0]+c[u][1],l[1]+c[u][2],l[0]+c[u][3],l[1]+c[u][4]),n+=d.getTotalLength(),h=[l[0]+c[u][1],l[1]+c[u][2]],l=[c[u][3]+l[0],c[u][4]+l[1]],r.push(d)):"T"===c[u][0]?(d=0<u&&-1<["Q","q","T","t"].indexOf(c[u-1][0])?new o(l[0],l[1],2*l[0]-h[0],2*l[1]-h[1],c[u][1],c[u][2]):new N(l[0],c[u][1],l[1],c[u][2]),r.push(d),n+=d.getTotalLength(),h=[2*l[0]-h[0],2*l[1]-h[1]],l=[c[u][1],c[u][2]]):"t"===c[u][0]?(d=0<u&&-1<["Q","q","T","t"].indexOf(c[u-1][0])?new o(l[0],l[1],2*l[0]-h[0],2*l[1]-h[1],l[0]+c[u][1],l[1]+c[u][2]):new N(l[0],l[0]+c[u][1],l[1],l[1]+c[u][2]),n+=d.getTotalLength(),h=[2*l[0]-h[0],2*l[1]-h[1]],l=[c[u][1]+l[0],c[u][2]+l[0]],r.push(d)):"A"===c[u][0]?(d=new A(l[0],l[1],c[u][1],c[u][2],c[u][3],c[u][4],c[u][5],c[u][6],c[u][7]),n+=d.getTotalLength(),l=[c[u][6],c[u][7]],r.push(d)):"a"===c[u][0]&&(d=new A(l[0],l[1],c[u][1],c[u][2],c[u][3],c[u][4],c[u][5],l[0]+c[u][6],l[1]+c[u][7]),n+=d.getTotalLength(),l=[l[0]+c[u][6],l[1]+c[u][7]],r.push(d)),s.push(n);return t}var n=0,s=[],r=[];t.getTotalLength=function(){return n},t.getPointAtLength=function(e){var t=d(e);return r[t.i].getPointAtLength(t.fraction)},t.getTangentAtLength=function(e){var t=d(e);return r[t.i].getTangentAtLength(t.fraction)},t.getPropertiesAtLength=function(e){var t=d(e);return r[t.i].getPropertiesAtLength(t.fraction)},t.getParts=function(){for(var e=[],t=0;t<r.length;t++)if(null!=r[t]){var n={};n.start=r[t].getPointAtLength(0),n.end=r[t].getPointAtLength(s[t]-s[t-1]),n.length=s[t]-s[t-1],function(e){n.getPointAtLength=function(t){return e.getPointAtLength(t)},n.getTangentAtLength=function(t){return e.getTangentAtLength(t)},n.getPropertiesAtLength=function(t){return e.getPropertiesAtLength(t)}}(r[t]),e.push(n)}return e};var d=function(e){0>e?e=0:e>n&&(e=n);for(var t=s.length-1;s[t]>=e&&0<s[t];)t--;return t++,{fraction:e-s[t-1],i:t}};return t(e)}function I(e,t){for(var i=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=i.length,s=!1,r=0,d="",a=null!=t&&"string"==typeof t?t:"\t",c=["\n"],g=0;100>g;g+=1)c.push(c[g]+a);for(var l=0;l<n;l+=1)-1<i[l].search(/<!/)?(d+=c[r]+i[l],s=!0,(-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)||-1<i[l].search(/!DOCTYPE/))&&(s=!1)):-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)?(d+=i[l],s=!1):/^<\w/.exec(i[l-1])&&/^<\/\w/.exec(i[l])&&/^<[\w:\-\.\,]+/.exec(i[l-1])==/^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/","")?(d+=i[l],s||(r-=1)):-1<i[l].search(/<\w/)&&-1===i[l].search(/<\//)&&-1===i[l].search(/\/>/)?d=s?d+=i[l]:d+=c[r++]+i[l]:-1<i[l].search(/<\w/)&&-1<i[l].search(/<\//)?d=s?d+=i[l]:d+=c[r]+i[l]:-1<i[l].search(/<\//)?d=s?d+=i[l]:d+=c[--r]+i[l]:-1<i[l].search(/\/>/)?d=s?d+=i[l]:d+=c[r]+i[l]:d+=-1<i[l].search(/<\?/)?c[r]+i[l]:-1<i[l].search(/xmlns\:/)||-1<i[l].search(/xmlns\=/)?c[r]+i[l]:i[l];return"\n"===d[0]?d.slice(1):d}var U="undefined"!=typeof window&&"undefined"!=typeof window.document,K="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,Q="object"===("undefined"==typeof self?"undefined":e(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,Z={};if(K){var G=require("xmldom"),J=G.DOMParser,H=G.XMLSerializer;Z.DOMParser=J,Z.XMLSerializer=H,Z.document=new J().parseFromString("<!DOCTYPE html><title>a</title>","text/html")}else U&&(Z.DOMParser=window.DOMParser,Z.XMLSerializer=window.XMLSerializer,Z.document=window.document);var $={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ee=/([astvzqmhlc])([^astvzqmhlc]*)/ig,te=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;h.prototype={constructor:h,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(e){var i=p(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i)},getTangentAtLength:function(e){var i,n=p(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n),s=W(t.x*t.x+t.y*t.y);return i=0<s?{x:t.x/s,y:t.y/s}:{x:0,y:0},i},getPropertiesAtLength:function(e){var i,n=p(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n),s=W(t.x*t.x+t.y*t.y);i=0<s?{x:t.x/s,y:t.y/s}:{x:0,y:0};var r=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n);return{x:r.x,y:r.y,tangentX:i.x,tangentY:i.y}}};var ie=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],ne=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],se=[[1],[1,1],[1,2,1],[1,3,3,1]];L.prototype={constructor:L,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(e){0>e?e=0:e>this.length&&(e=this.length);var t=E({x:this.x0,y:this.y0},this.rx,this.ry,this.xAxisRotate,this.LargeArcFlag,this.SweepFlag,{x:this.x1,y:this.y1},e/this.length);return{x:t.x,y:t.y}},getTangentAtLength:function(e){0>e?e=0:e>this.length&&(e=this.length);var t=E({x:this.x0,y:this.y0},this.rx,this.ry,this.xAxisRotate,this.LargeArcFlag,this.SweepFlag,{x:this.x1,y:this.y1},e/this.length);return{x:t.x,y:t.y}},getPropertiesAtLength:function(e){var t=this.getTangentAtLength(e),i=this.getPointAtLength(e);return{x:i.x,y:i.y,tangentX:t.x,tangentY:t.y}}},q.prototype.getTotalLength=function(){return W(B(this.x0-this.x1,2)+B(this.y0-this.y1,2))},q.prototype.getPointAtLength=function(e){var t=e/W(B(this.x0-this.x1,2)+B(this.y0-this.y1,2)),i=(this.x1-this.x0)*t,n=(this.y1-this.y0)*t;return{x:this.x0+i,y:this.y0+n}},q.prototype.getTangentAtLength=function(){var e=W((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/e,y:(this.y1-this.y0)/e}},q.prototype.getPropertiesAtLength=function(e){var t=this.getPointAtLength(e),i=this.getTangentAtLength();return{x:t.x,y:t.y,tangentX:i.x,tangentY:i.y}};var re=128,de={value:0},ae=function(e){return e.split(" ").filter(function(e){return""!==e}).map(function(e){return e.split(",").map(function(e){return parseFloat(e)})})},ce=function(e,t){var i=t.map(function(t){for(var n=0;n<e.attributes.length;n+=1)if(e.attributes[n].nodeName===t)return n});return i.map(function(t){return void 0===t?de:e.attributes[t]}).map(function(e){return void 0===e.value?e.baseVal.value:e.value})},ge=function(e){for(var t="",n=0;n<e.attributes.length;n+=1)if("points"===e.attributes[n].nodeName){t=e.attributes[n].value;break}return ae(t).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},le={line:function(e){return[ce(e,["x1","y1","x2","y2"])]},rect:function(e){var t=ce(e,["x","y","width","height"]),i=parseFloat(t[0]),n=parseFloat(t[1]),s=parseFloat(t[2]),r=parseFloat(t[3]);return[[i,n,i+s,n],[i+s,n,i+s,n+r],[i+s,n+r,i,n+r],[i,n+r,i,n]]},circle:function(e){var t=ce(e,["cx","cy","r"]),n=parseFloat(t[0]),s=parseFloat(t[1]),d=parseFloat(t[2]);return Array.from(Array(64)).map(function(e,t){return[n+d*R(2*(t/64*z)),s+d*X(2*(t/64*z))]}).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},ellipse:function(e){var t=ce(e,["cx","cy","rx","ry"]),n=parseFloat(t[0]),s=parseFloat(t[1]),r=parseFloat(t[2]),d=parseFloat(t[3]);return Array.from(Array(64)).map(function(e,t){return[n+r*R(2*(t/64*z)),s+d*X(2*(t/64*z))]}).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},polygon:ge,polyline:function(e){var t=ge(e);return t.pop(),t},path:function(e){var t=e.getAttribute("d"),n=D(t),s=n.getTotalLength(),r="Z"===t[t.length-1]||"z"===t[t.length-1],d=r?s/re:s/(re-1),a=Array.from(Array(re)).map(function(e,t){return n.getPointAtLength(t*d)}).map(function(e){return[e.x,e.y]}),c=a.map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]});return r||c.pop(),c}},oe={};if(function(){return"undefined"==typeof window&&"undefined"!=typeof process}()){var he=require("xmldom"),ue=he.DOMParser,fe=he.XMLSerializer;oe.DOMParser=ue,oe.XMLSerializer=fe,oe.document=new ue().parseFromString("<!DOCTYPE html><title> </title>","text/html")}else(function(){return"undefined"!=typeof window})()&&(oe.DOMParser=window.DOMParser,oe.XMLSerializer=window.XMLSerializer,oe.document=window.document);var pe=function(e){var t=e.match(/(\w+\((\-?\d+\.?\d*e?\-?\d*,?\s*)+\))+/g),i=t.map(function(e){return e.match(/[\w\.\-]+/g)});return i.map(function(e){return{transform:e.shift(),parameters:e.map(function(e){return parseFloat(e)})}})},me=function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5],e[2]*t[0]+e[3]*t[2]+t[4],e[2]*t[1]+e[3]*t[3]+t[5]]},ve=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},ye=function(e){switch(e.length){case 1:return[1,0,0,1,e[0],0];case 2:return[1,0,0,1,e[0],e[1]];default:console.warn("improper translate, ".concat(e));}},_e=function(e){var t=R(e[0]/180*z),i=X(e[0]/180*z);switch(e.length){case 1:return[t,i,-i,t,0,0];case 3:return[t,i,-i,t,-e[1]*t+e[2]*i+e[1],-e[1]*i-e[2]*t+e[2]];default:console.warn("improper rotate, ".concat(e));}},xe=function(e){switch(e.length){case 1:return[e[0],0,0,e[0],0,0];case 2:return[e[0],0,0,e[1],0,0];default:console.warn("improper scale, ".concat(e));}},be=function(e){return[1,0,M(e[0]/180*z),1,0,0]},ke=function(e){return[1,M(e[0]/180*z),0,1,0,0]},Ae=function(e,t){switch(e){case"translate":return ye(t);case"rotate":return _e(t);case"scale":return xe(t);case"skewX":return be(t);case"skewY":return ke(t);case"matrix":return t;default:console.warn("unknown transform type ".concat(e));}},Le=function(e){return pe(e).map(function(e){return Ae(e.transform,e.parameters)}).filter(function(e){return void 0!==e}).reduce(function(e,t){return ve(e,t)},[1,0,0,1,0,0])},Ee=function(e){if("function"!=typeof e.getAttribute)return[1,0,0,1,0,0];var t=e.getAttribute("transform");return null!=t&&""!==t?Le(t):[1,0,0,1,0,0]},Se=function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[1,0,0,1,0,0],n=ve(i,Ee(t));if(t.matrix=n,"g"===t.tagName||"svg"===t.tagName){if(null==t.childNodes)return;Array.from(t.childNodes).forEach(function(t){return e(t,n)})}},Pe=Object.keys(le),we="http://www.w3.org/2000/svg",Te={string:!0,svg:!1},je=["version","xmlns","contentScriptType","contentStyleType","baseProfile","class","externalResourcesRequired","x","y","width","height","viewBox","preserveAspectRatio","zoomAndPan","style"],Oe={line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:["points"],polyline:["points"],path:["d"]},Ne=function(e){return"string"==typeof e||e instanceof String?new oe.DOMParser().parseFromString(e,"text/xml").documentElement:e},qe=function e(t){return"g"===t.tagName||"svg"===t.tagName?null==t.childNodes?[]:Array.from(t.childNodes).map(function(t){return e(t)}).reduce(function(e,t){return e.concat(t)},[]):[t]},De=function(e){return Array.from(e.attributes).filter(function(t){return-1===Oe[e.tagName].indexOf(t.name)})},Ie=function(e){var t={};return e.forEach(function(e){t[e.nodeName]=e.value}),t},Me=function(e,t){var i=Ne(e);Se(i);var n=qe(i),s=n.filter(function(t){return-1!==Pe.indexOf(t.tagName)}).map(function(t){return le[t.tagName](t).map(function(e){return me(e,t.matrix)}).map(function(e){return[].concat(r(e),[De(t)])})}).reduce(function(e,t){return e.concat(t)},[]);s.filter(function(e){return void 0!==e[4]}).forEach(function(e){var t=e[4].filter(function(e){return"transform"!==e.nodeName});e[4]=Ie(t)});var d=Object.assign(Object.assign({},Te),t);if(d.svg){var a=oe.document.createElementNS(we,"svg");je.map(function(e){return{attribute:e,value:i.getAttribute(e)}}).filter(function(e){return null!=e.value&&""!==e.value}).forEach(function(e){return a.setAttribute(e.attribute,e.value)}),null===a.getAttribute("xmlns")&&a.setAttribute("xmlns",we);var c=n.filter(function(t){return"style"===t.tagName||"defs"===t.tagName});if(0<c.length&&c.map(function(e){return e.cloneNode(!0)}).forEach(function(e){return a.appendChild(e)}),s.forEach(function(e){var t=oe.document.createElementNS(we,"line");t.setAttributeNS(null,"x1",e[0]),t.setAttributeNS(null,"y1",e[1]),t.setAttributeNS(null,"x2",e[2]),t.setAttributeNS(null,"y2",e[3]),null!=e[4]&&Object.keys(e[4]).forEach(function(i){return t.setAttribute(i,e[4][i])}),a.appendChild(t)}),!1===d.string)return a;var g=new oe.XMLSerializer().serializeToString(a),l=I(g);return l}return s},Ce={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",green:"#008000",lime:"#00ff00",olive:"#808000",yellow:"#ffff00",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff",orange:"#ffa500",aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",oldlace:"#fdf5e6",olivedrab:"#6b8e23",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellowgreen:"#9acd32"},Fe=Object.keys(Ce),Ve=function(e){var t=0,i=0,n=0,s=255;return 4===e.length?(t="0x".concat(e[1]).concat(e[1]),i="0x".concat(e[2]).concat(e[2]),n="0x".concat(e[3]).concat(e[3])):7===e.length?(t="0x".concat(e[1]).concat(e[2]),i="0x".concat(e[3]).concat(e[4]),n="0x".concat(e[5]).concat(e[6])):5===e.length?(t="0x".concat(e[1]).concat(e[1]),i="0x".concat(e[2]).concat(e[2]),n="0x".concat(e[3]).concat(e[3]),s="0x".concat(e[4]).concat(e[4])):9===e.length&&(t="0x".concat(e[1]).concat(e[2]),i="0x".concat(e[3]).concat(e[4]),n="0x".concat(e[5]).concat(e[6]),s="0x".concat(e[7]).concat(e[8])),[+(t/255),+(i/255),+(n/255),+(s/255)]},ze=function(e){if(null==e||"string"!=typeof e)return"U";var t=[0,0,0,1];"#"===e[0]?t=Ve(e):-1!==Fe.indexOf(e)&&(t=Ve(Ce[e]));var i=.05;return t[0]<i&&t[1]<i&&t[2]<i?"U":t[0]>t[1]&&t[0]-t[2]>i?"M":t[2]>t[1]&&t[2]-t[0]>i?"V":"U"},Xe=1e-6,Re=function(e,t){return e>Xe&&e<1-Xe&&t>Xe&&t<1-Xe},We=function(e,t,i,n,s){function r(e,t){return e[0]*t[1]-t[0]*e[1]}var d=5<arguments.length&&void 0!==arguments[5]?arguments[5]:Xe,a=r(t,n);if(!(Y(a)<d)){var c=r([i[0]-e[0],i[1]-e[1]],n),g=r([e[0]-i[0],e[1]-i[1]],t),l=c/a;return s(l,g/-a,d)?[e[0]+t[0]*l,e[1]+t[1]*l]:void 0}},Be={core:{EPSILON:Xe,equivalent:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xe,s=0;s<e.length;s+=1)if(Y(e[s]-t[s])>n)return!1;return!0},point_on_edge_exclusive:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Xe,s=[t[0]-i[0],t[1]-i[1]],r=[t[0]-e[0],t[1]-e[1]],d=[i[0]-e[0],i[1]-e[1]],a=W(s[0]*s[0]+s[1]*s[1]),c=W(r[0]*r[0]+r[1]*r[1]),g=W(d[0]*d[0]+d[1]*d[1]);return Y(a-c-g)<n},intersection:{edge_edge_exclusive:function(e,t,i,n,s){var r=[t[0]-e[0],t[1]-e[1]],d=[n[0]-i[0],n[1]-i[1]];return We(e,r,i,d,Re,s)}}}},Ye=function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return V.apply(Math,t(i.filter(function(e){return void 0!==e}).map(function(e){return e.length})))},Ue={vertices:function(e){var t=e.vertices_coords,i=e.vertices_faces,n=e.vertices_vertices;return Ye([],t,i,n)},edges:function(e){var t=e.edges_vertices,i=e.edges_faces;return Ye([],t,i)},faces:function(e){var t=e.faces_vertices,i=e.faces_edges;return Ye([],t,i)}},Ke=function(e,t,i){var n=Ue[t](e),r=Array(n).fill(!1);i.forEach(function(e){r[e]=!0});var d=0,a=r.map(function(e){return e?--d:d});if(0===i.length)return a;var c="".concat(t,"_"),g="_".concat(t),l=Object.keys(e),o=l.map(function(e){return e.substring(0,c.length)===c?e:void 0}).filter(function(e){return void 0!==e}),h=l.map(function(e){return e.substring(e.length-g.length,e.length)===g?e:void 0}).filter(function(e){return void 0!==e});return h.forEach(function(t){return e[t].forEach(function(n,s){return e[t][s].forEach(function(i,n){e[t][s][n]+=a[i]})})}),o.forEach(function(t){e[t]=e[t].filter(function(e,t){return!r[t]})}),a},Qe=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},Ze=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Be.core.EPSILON,s=i.map(function(e){return e.map(function(e){return t[e]})});return s.map(function(i){return t.filter(function(e){return Be.core.point_on_edge_exclusive(e,i[0],i[1],n)})})},Ge=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=i.map(function(e){return e.map(function(e){return t[e]})}),s=n.map(function(t){return[t[1][0]-t[0][0],t[1][1]-t[0][1]]}),r=s.map(function(t){return W(t[0]*t[0]+t[1]*t[1])}),d=s.map(function(t,e){return[t[0]/r[e],t[1]/r[e]]});return d.map(function(t){return .707<Y(t[0])})},Je=function(e){for(var t=e.vertices_coords,n=e.edges_vertices,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Be.core.EPSILON,r=n.length,d=n.map(function(e){return e.map(function(e){return t[e]})}),a=Array.from(Array(r-1)).map(function(){return[]}),c=0;c<d.length-1;c+=1)for(var g=c+1;g<d.length;g+=1)a[c][g]=Be.core.intersection.edge_edge_exclusive(d[c][0],d[c][1],d[g][0],d[g][1],s);for(var l=Array.from(Array(r)).map(function(){return[]}),o=0;o<d.length-1;o+=1)for(var h=o+1;h<d.length;h+=1)null!=a[o][h]&&(l[o].push(a[o][h]),l[h].push(a[o][h]));return l},He=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Be.core.EPSILON,n=function(e,t){return e[0]-t[0]},s=function(e,t){return e[1]-t[1]},r=Ge(e),d=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})});d.forEach(function(t,e){return t.sort(r[e]?n:s)});var a=Je(e,t),c=Ze(e,t),g=a.map(function(e,t){return e.concat(c[t])});g.forEach(function(t,e){return t.sort(r[e]?n:s)});var l=g.map(function(e){return Array.from(Array(e.length-1)).map(function(t,n){return[e[n],e[n+1]]})});l=l.map(function(e){return e.filter(function(n){return!1===n.map(function(e,s){return Y(n[0][s]-n[1][s])<t}).reduce(function(e,t){return e&&t},!0)})});for(var o=l.map(function(e,t){return e.map(function(){return t})}).reduce(function(e,t){return e.concat(t)},[]),h=l.map(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).reduce(function(e,t){return e.concat(t)},[]),u=0,f=l.map(function(e){return e.map(function(){return[u++,u++]})}).reduce(function(e,t){return e.concat(t)},[]),p=Array.from(Array(h.length)).map(function(){return[]}),m=0;m<h.length-1;m+=1)for(var v=m+1;v<h.length;v+=1)p[m][v]=Be.core.equivalent(h[m],h[v],t);var y=h.map(function(){});p.forEach(function(e,t){return e.forEach(function(e,i){e&&(y[i]=void 0===y[t]?t:y[t])})});var _=y.map(function(e){return void 0!==e});y.forEach(function(e,t){void 0===e&&(y[t]=t)}),f.forEach(function(e,t){return e.forEach(function(e,i){f[t][i]=y[e]})});for(var x=Array.from(Array(f.length)).map(function(){return[]}),b=0;b<f.length-1;b+=1)for(var k=b+1;k<f.length;k+=1)x[b][k]=Qe(f[b],f[k]);var A=f.map(function(){});x.forEach(function(e,t){return e.forEach(function(e,i){e&&(A[t]=void 0===A[i]?i:A[i])})});var L=A.map(function(e){return void 0===e});A.forEach(function(e,t){void 0===e&&(A[t]=t)});var E=f.filter(function(e,t){return L[t]}),S=o.filter(function(e,t){return L[t]}),P={vertices_coords:h,edges_vertices:E};!0=="edges_assignment"in e&&(P.edges_assignment=S.map(function(t){return e.edges_assignment[t]})),!0=="edges_foldAngle"in e&&(P.edges_foldAngle=S.map(function(t){return e.edges_foldAngle[t]}));var w=_.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e});return Ke(P,"vertices",w),P},$e={},et=function(e,t){return(+e%(t=+t)+t)%t};$e.EPS=1e-6,$e.sum=function(e,t){return e+t},$e.min=function(e,t){return e<t?e:t},$e.max=function(e,t){return e>t?e:t},$e.all=function(e,t){return e&&t},$e.next=function(e,t,n){return null==n&&(n=1),et(e+n,t)},$e.rangesDisjoint=function(e,t){var i,n,s,r,d,a;return i=e[0],n=e[1],s=t[0],r=t[1],s<(d=F(i,n))&&d>r||s>(a=V(i,n))&&a<r},$e.topologicalSort=function(e){var t,i,n,s,r,d,a;for(t=0,n=e.length;t<n;t++)a=e[t],d=[!1,null],a.visited=d[0],a.parent=d[1];for(r=[],i=0,s=e.length;i<s;i++)a=e[i],a.visited||(r=$e.visit(a,r));return r},$e.visit=function(e,t){var i,n,s,r;for(e.visited=!0,s=e.children,(i=0,n=s.length);i<n;i++)(r=s[i],!!!r.visited)&&(r.parent=e,t=$e.visit(r,t));return t.concat([e])},$e.magsq=function(e){return $e.dot(e,e)},$e.mag=function(e){return W($e.magsq(e))},$e.unit=function(e,t){var i;return null==t&&(t=$e.EPS),i=$e.magsq(e),i<t?null:$e.mul(e,1/$e.mag(e))},$e.ang2D=function(e,t){var i=Math.atan2;return null==t&&(t=$e.EPS),$e.magsq(e)<t?null:i(e[1],e[0])},$e.mul=function(e,t){var n,s,r,d;for(d=[],s=0,r=e.length;s<r;s++)n=e[s],d.push(n*t);return d},$e.linearInterpolate=function(e,t,i){return $e.plus($e.mul(t,1-e),$e.mul(i,e))},$e.plus=function(e,t){var n,s,r,d,a;for(a=[],s=r=0,d=e.length;r<d;s=++r)n=e[s],a.push(n+t[s]);return a},$e.sub=function(e,t){return $e.plus(e,$e.mul(t,-1))},$e.dot=function(e,t){var n,s;return function(){var i,r,d;for(d=[],s=i=0,r=e.length;i<r;s=++i)n=e[s],d.push(n*t[s]);return d}().reduce($e.sum)},$e.distsq=function(e,t){return $e.magsq($e.sub(e,t))},$e.dist=function(e,t){return W($e.distsq(e,t))},$e.closestIndex=function(e,t){var n,s,r,d,a,c,g;for(c=2e308,r=d=0,a=t.length;d<a;r=++d)n=t[r],c>(s=$e.dist(e,n))&&(c=s,g=r);return g},$e.dir=function(e,t){return $e.unit($e.sub(t,e))},$e.ang=function(e,t){var i,n,s,r;return i=function(){var i,n,s,d;for(s=[e,t],d=[],(i=0,n=s.length);i<n;i++)r=s[i],d.push($e.unit(r));return d}(),n=i[0],s=i[1],null==n||null==s?null:C($e.dot(n,s))},$e.cross=function(e,t){var n,s,r,d;return e.length===(r=t.length)&&2===r?e[0]*t[1]-e[1]*t[0]:e.length===(d=t.length)&&3===d?function(){var i,r,d,a,c;for(d=[[1,2],[2,0],[0,1]],c=[],(i=0,r=d.length);i<r;i++)a=d[i],n=a[0],s=a[1],c.push(e[n]*t[s]-e[s]*t[n]);return c}():null},$e.parallel=function(e,t,i){var n,s,r,d;return null==i&&(i=$e.EPS),n=function(){var i,n,s,r;for(s=[e,t],r=[],(i=0,n=s.length);i<n;i++)d=s[i],r.push($e.unit(d));return r}(),s=n[0],r=n[1],null==s||null==r?null:1-Y($e.dot(s,r))<i},$e.rotate=function(e,n,s){var t,r,d,a,c,g,l,o,h,f;if(n=$e.unit(n),null==n)return null;for(l=[R(s),X(s)],t=l[0],f=l[1],o=[[0,1,2],[1,2,0],[2,0,1]],h=[],(d=0,a=o.length);d<a;d++)c=o[d],h.push(function(){var i,s,d,a;for(d=[t,-f*n[c[2]],f*n[c[1]]],a=[],(r=i=0,s=d.length);i<s;r=++i)g=d[r],a.push(e[c[r]]*(n[c[0]]*n[c[r]]*(1-t)+g));return a}().reduce($e.sum));return h},$e.interiorAngle=function(e,t,i){var n;return n=$e.ang2D($e.sub(e,t))-$e.ang2D($e.sub(i,t)),n+(0>n?2*z:0)},$e.turnAngle=function(e,t,i){return z-$e.interiorAngle(e,t,i)},$e.triangleNormal=function(e,t,i){return $e.unit($e.cross($e.sub(t,e),$e.sub(i,t)))},$e.polygonNormal=function(e,t){var n,s;return null==t&&(t=$e.EPS),$e.unit(function(){var t,i,r;for(r=[],n=t=0,i=e.length;t<i;n=++t)s=e[n],r.push($e.cross(s,e[$e.next(n,e.length)]));return r}().reduce($e.plus),t)},$e.twiceSignedArea=function(e){var t,n,s;return function(){var i,r,d;for(d=[],t=i=0,r=e.length;i<r;t=++i)n=e[t],s=e[$e.next(t,e.length)],d.push(n[0]*s[1]-s[0]*n[1]);return d}().reduce($e.sum)},$e.polygonOrientation=function(e){var t=Math.sign;return t($e.twiceSignedArea(e))},$e.sortByAngle=function(e,t,i){return null==t&&(t=[0,0]),null==i&&(i=function(e){return e}),t=i(t),e.sort(function(e,n){var s,r;return s=$e.ang2D($e.sub(i(e),t)),r=$e.ang2D($e.sub(i(n),t)),s-r})},$e.segmentsCross=function(e,t){var i,n,s,r;return i=e[0],s=e[1],n=t[0],r=t[1],!($e.rangesDisjoint([i[0],s[0]],[n[0],r[0]])||$e.rangesDisjoint([i[1],s[1]],[n[1],r[1]]))&&$e.polygonOrientation([i,s,n])!==$e.polygonOrientation([i,s,r])&&$e.polygonOrientation([n,r,i])!==$e.polygonOrientation([n,r,s])},$e.parametricLineIntersect=function(e,t){var i,n,s,r,d;return n=e[0],s=e[1],r=t[0],d=t[1],i=(d[1]-r[1])*(s[0]-n[0])+(r[0]-d[0])*(s[1]-n[1]),0===i?[null,null]:[(d[0]*(n[1]-r[1])+d[1]*(r[0]-n[0])+r[1]*n[0]-n[1]*r[0])/i,(r[0]*(s[1]-n[1])+r[1]*(n[0]-s[0])+n[1]*s[0]-s[1]*n[0])/i]},$e.segmentIntersectSegment=function(e,i){var n,r,d;return n=$e.parametricLineIntersect(e,i),r=n[0],d=n[1],null!=r&&0<=r&&1>=r&&0<=d&&1>=d?$e.linearInterpolate(r,e[0],e[1]):null},$e.lineIntersectLine=function(e,i){var n,r,d;return n=$e.parametricLineIntersect(e,i),r=n[0],d=n[1],null==r?null:$e.linearInterpolate(r,e[0],e[1])},$e.pointStrictlyInSegment=function(e,t,i){var n,s;return null==i&&(i=$e.EPS),n=$e.sub(e,t[0]),s=$e.sub(e,t[1]),$e.parallel(n,s,i)&&0>$e.dot(n,s)},$e.centroid=function(e){return $e.mul(e.reduce($e.plus),1/e.length)},$e.basis=function(e,t){var i,s,r,a,c,g,l,o;return(null==t&&(t=$e.EPS),function(){var t,i,n;for(n=[],t=0,i=e.length;t<i;t++)c=e[t],n.push(3!==c.length);return n}().reduce($e.all))?null:(s=function(){var i,n,s;for(s=[],i=0,n=e.length;i<n;i++)c=e[i],$e.distsq(c,e[0])>t&&s.push($e.dir(c,e[0]));return s}(),0===s.length)?[]:(g=s[0],function(){var e,n,r;for(r=[],e=0,n=s.length;e<n;e++)i=s[e],r.push($e.parallel(i,g,t));return r}().reduce($e.all))?[g]:(a=function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)i=s[e],n.push($e.unit($e.cross(i,g)));return n}(),a=function(){var e,t,i;for(i=[],e=0,t=a.length;e<t;e++)r=a[e],null!=r&&i.push(r);return i}(),o=a[0],l=$e.cross(o,g),function(){var e,i,n;for(n=[],e=0,i=a.length;e<i;e++)r=a[e],n.push($e.parallel(r,o,t));return n}().reduce($e.all)?[g,l]:[g,l,o])},$e.above=function(e,t,i,n){var s,r,d,a,c;return null==n&&(n=$e.EPS),d=function(){var n,s,r,d;for(r=[e,t],d=[],(n=0,s=r.length);n<s;n++)c=r[n],d.push(function(){var e,t,n;for(n=[],e=0,t=c.length;e<t;e++)a=c[e],n.push($e.dot(a,i));return n}());return d}(),s=d[0],r=d[1],r.reduce($e.max)-s.reduce($e.min)<n?1:s.reduce($e.max)-r.reduce($e.min)<n?-1:0},$e.separatingDirection2D=function(e,s,r,n){var d,a,c,g,h,u,f,v,y,_,x,b,A,L;for(null==n&&(n=$e.EPS),b=[e,s],(c=0,h=b.length);c<h;c++)for(L=b[c],d=g=0,u=L.length;g<u;d=++g)for(_=L[d],a=y=0,f=L.length;y<f;a=++y)if((x=L[a],!!(d<a))&&(v=$e.unit($e.cross($e.sub(_,x),r)),null!=v&&(A=$e.above(e,s,v,n),0!==A)))return $e.mul(v,A);return null},$e.separatingDirection3D=function(e,t,n){var s,d,a,c,g,h,u,f,v,y,_,x,b,A,L,E,S,P,w;for(null==n&&(n=$e.EPS),L=[[e,t],[t,e]],(a=0,g=L.length);a<g;a++)for(E=L[a],P=E[0],w=E[1],(c=0,h=P.length);c<h;c++)for(_=P[c],s=y=0,u=w.length;y<u;s=++y)for(x=w[s],d=A=0,f=w.length;A<f;d=++A)if((b=w[d],!!(s<d))&&(v=$e.unit($e.cross($e.sub(_,x),$e.sub(_,b))),null!=v&&(S=$e.above(e,t,v,n),0!==S)))return $e.mul(v,S);return null},$e.circleCross=function(e,t,i){var n,s;return n=(e*e-i*i+t*t)/e/2,s=W(t*t-n*n),[n,s]},$e.creaseDir=function(e,t,i,n,s){var r,d,a,c,g,l;return null==s&&(s=$e.EPS),r=R(i)+R(n),d=R(i)-R(n),a=$e.plus(e,t),c=$e.sub(e,t),g=$e.unit($e.cross(c,a)),a=$e.mul(a,r/$e.magsq(a)),c=$e.mul(c,$e.magsq(c)<s?0:d/$e.magsq(c)),l=W(1-$e.magsq(a)-$e.magsq(c)),g=$e.mul(g,l),[a,c,g].reduce($e.plus)},$e.quadSplit=function(e,i,n,s){if($e.magsq(i)>n*n)throw new Error("STOP! Trying to split expansive quad.");return $e.mul(e,(n*n-$e.magsq(i))/2/(n*R(s)-$e.dot(e,i)))};var tt={},it=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};tt.edgesAssigned=function(e,t){var n,s,r,d,a,c;for(a=e.edges_assignment,c=[],(s=r=0,d=a.length);r<d;s=++r)n=a[s],n===t&&c.push(s);return c},tt.mountainEdges=function(e){return tt.edgesAssigned(e,"M")},tt.valleyEdges=function(e){return tt.edgesAssigned(e,"V")},tt.flatEdges=function(e){return tt.edgesAssigned(e,"F")},tt.boundaryEdges=function(e){return tt.edgesAssigned(e,"B")},tt.unassignedEdges=function(e){return tt.edgesAssigned(e,"U")},tt.keysStartingWith=function(e,t){var i,n;for(i in n=[],e)i.slice(0,t.length)===t&&n.push(i);return n},tt.keysEndingWith=function(e,t){var i,n;for(i in n=[],e)i.slice(-t.length)===t&&n.push(i);return n},tt.remapField=function(e,t,n){var s,r,d,a,c,g,o,h,u,f,p,v,y,_;for(p=[],r=a=0,o=n.length;a<o;r=++a)d=n[r],null!=d&&(p[d]=r);for(y=tt.keysStartingWith(e,t+"_"),g=0,h=y.length;g<h;g++)c=y[g],e[c]=function(){var t,i,n;for(n=[],i=0,t=p.length;i<t;i++)v=p[i],n.push(e[c][v]);return n}();for(_=tt.keysEndingWith(e,"_"+t),f=0,u=_.length;f<u;f++)c=_[f],e[c]=function(){var t,i,r,d;for(r=e[c],d=[],(i=0,t=r.length);i<t;i++)s=r[i],d.push(function(){var e,t,i;for(i=[],t=0,e=s.length;t<e;t++)v=s[t],i.push(n[v]);return i}());return d}();return e},tt.remapFieldSubset=function(e,t,i){var n,s,r;return n=0,s=function(){var e,t,s;for(s=[],e=0,t=i.length;e<t;e++)r=i[e],r?s.push(n++):s.push(null);return s}(),tt.remapField(e,t,s),s},tt.numType=function(e,t){var i,n,s;return i=function(){var i,r,d,a;for(d=tt.keysStartingWith(e,t+"_"),a=[],(i=0,r=d.length);i<r;i++)(n=d[i],s=e[n],null!=s.length)&&a.push(s.length);return a}(),i.length||(i=function(){var i,s,r,d;for(r=tt.keysEndingWith(e,"_"+t),d=[],(i=0,s=r.length);i<s;i++)n=r[i],d.push(1+V.apply(Math,e[n]));return d}()),i.length?V.apply(Math,i):0},tt.numVertices=function(e){return tt.numType(e,"vertices")},tt.numEdges=function(e){return tt.numType(e,"edges")},tt.numFaces=function(e){return tt.numType(e,"faces")},tt.removeDuplicateEdges_vertices=function(e){var t,i,n,s,r,d,a;return r={},i=0,s=function(){var s,c,g,l;for(g=e.edges_vertices,l=[],(s=0,c=g.length);s<c;s++)t=g[s],d=t[0],a=t[1],n=d<a?d+","+a:a+","+d,n in r||(r[n]=i,i+=1),l.push(r[n]);return l}(),tt.remapField(e,"edges",s),s},tt.edges_verticesIncident=function(e,t){var i,n,s;for(i=0,n=e.length;i<n;i++)if(s=e[i],0<=it.call(t,s))return s;return null};var nt=function(){var t=Math.round;function e(e,t){var i,n,s,r,d,a,c;for(this.vertices_coords=e,this.epsilon=t,this.hash={},a=this.vertices_coords,(c=s=0,r=a.length);s<r;c=++s)n=a[c],(null==(i=this.hash)[d=this.key(n)]?i[d]=[]:i[d]).push(c)}return e.prototype.lookup=function(e){var i,n,s,r,d,a,c,g,o,h,u,f,p,_,b,A,L,E;for(p=e[0],A=e[1],_=t(p/this.epsilon),L=t(A/this.epsilon),g=[_,_-1,_+1],(i=0,r=g.length);i<r;i++)for(b=g[i],o=[L,L-1,L+1],(s=0,d=o.length);s<d;s++)for(E=o[s],n=b+","+E,u=null==(h=this.hash[n])?[]:h,(c=0,a=u.length);c<a;c++)if(f=u[c],this.epsilon>$e.dist(this.vertices_coords[f],e))return f;return null},e.prototype.key=function(e){var i,n,s,r,d;return n=e[0],r=e[1],s=t(n/this.epsilon),d=t(r/this.epsilon),i=s+","+d},e.prototype.insert=function(e){var t,i,n;return(n=this.lookup(e),null!=n)?n:((null==(t=this.hash)[i=this.key(e)]?t[i]=[]:t[i]).push(n=this.vertices_coords.length),this.vertices_coords.push(e),n)},e}();tt.collapseNearbyVertices=function(e,t){var i,n,s;return s=new nt([],t),n=function(){var t,n,r,d;for(r=e.vertices_coords,d=[],(t=0,n=r.length);t<n;t++)i=r[t],d.push(s.insert(i));return d}(),tt.remapField(e,"vertices",n)},tt.maybeAddVertex=function(e,t,n){var s;return s=$e.closestIndex(t,e.vertices_coords),null!=s&&n>=$e.dist(t,e.vertices_coords[s])?s:e.vertices_coords.push(t)-1},tt.addVertexLike=function(e,t){var i,n,s,r,d;for(d=tt.numVertices(e),r=tt.keysStartingWith(e,"vertices_"),(i=0,s=r.length);i<s;i++)switch(n=r[i],n.slice(6)){case"vertices":break;default:e[n][d]=e[n][t];}return d},tt.addEdgeLike=function(e,t,i,n){var s,r,d,a,c;for(s=e.edges_vertices.length,c=tt.keysStartingWith(e,"edges_"),(r=0,a=c.length);r<a;r++)switch(d=c[r],d.slice(6)){case"vertices":e.edges_vertices.push([null==i?e.edges_vertices[t][0]:i,null==n?e.edges_vertices[t][1]:n]);break;case"edges":break;default:e[d][s]=e[d][t];}return s},tt.addVertexAndSubdivide=function(t,n,r){var d,a,c,g,l,o,h,f,p,m;if(m=tt.maybeAddVertex(t,n,r),d=[],m===t.vertices_coords.length-1)for(h=t.edges_vertices,c=l=0,o=h.length;l<o;c=++l)(a=h[c],!(0<=it.call(a,m)))&&(f=function(){var e,i,n;for(n=[],e=0,i=a.length;e<i;e++)p=a[e],n.push(t.vertices_coords[p]);return n}(),$e.pointStrictlyInSegment(n,f)&&(g=tt.addEdgeLike(t,c,m,a[1]),d.push(c,g),a[1]=m));return[m,d]},tt.removeLoopEdges=function(e){var t;return tt.remapFieldSubset(e,"edges",function(){var i,n,s,r;for(s=e.edges_vertices,r=[],(i=0,n=s.length);i<n;i++)t=s[i],r.push(t[0]!==t[1]);return r}())},tt.subdivideCrossingEdges_vertices=function(t,r,d){var a,c,g,o,h,f,y,_,x,b,A,L,E,S,P,w,T,j,O,N,q,D,I,M,C,F,V,z,X,R;for(c=[[],[]],a=function(e,i,n,s){var r;return r=tt.addEdgeLike(t,n,e,i),c[s].push(n,r)},_=null==d?0:d;_<t.edges_vertices.length;){for(h=t.edges_vertices[_],C=function(){var e,i,n;for(n=[],e=0,i=h.length;e<i;e++)z=h[e],n.push(t.vertices_coords[z]);return n}(),q=t.vertices_coords,(X=A=0,E=q.length);A<E;X=++A)(N=q[X],!(0<=it.call(h,X)))&&$e.pointStrictlyInSegment(N,C)&&(a(X,h[1],_,0),h[1]=X);_++}for(R=new nt(t.vertices_coords,r),x=null==d?0:d;x<t.edges_vertices.length;){for(f=t.edges_vertices[x],F=function(){var e,i,n;for(n=[],e=0,i=f.length;e<i;e++)X=f[e],n.push(t.vertices_coords[X]);return n}(),D=t.edges_vertices.slice(0,x),(b=L=0,S=D.length);L<S;b=++L)if(y=D[b],V=function(){var e,i,n;for(n=[],i=0,e=y.length;i<e;i++)X=y[i],n.push(t.vertices_coords[X]);return n}(),!tt.edges_verticesIncident(f,y)&&$e.segmentsCross(F,V)){if(g=$e.lineIntersectLine(F,V),null==g)continue;o=R.insert(g),0<=it.call(f,o)&&0<=it.call(y,o)||(0>it.call(f,o)&&(a(o,f[1],x,0),f[1]=o,F[1]=t.vertices_coords[o]),0>it.call(y,o)&&(a(o,y[1],b,1),y[1]=o))}x++}for(O=tt.removeDuplicateEdges_vertices(t),I=[0,1],(T=0,P=I.length);T<P;T++)_=I[T],c[_]=function(){var e,t,i,s;for(i=c[_],s=[],(t=0,e=i.length);t<e;t++)h=i[t],s.push(O[h]);return s}();for(O=tt.removeLoopEdges(t),M=[0,1],(j=0,w=M.length);j<w;j++)_=M[j],c[_]=function(){var e,t,i,n;for(i=c[_],n=[],(t=0,e=i.length);t<e;t++)h=i[t],n.push(O[h]);return n}();return null==d?c[0].concat(c[1]):c},tt.addEdgeAndSubdivide=function(t,n,s,r){var d,a,c,g,l,o,h,u,f,p,m,v,y;if(null!=n.length&&(f=tt.addVertexAndSubdivide(t,n,r),n=f[0],a=f[1]),null!=s.length&&(p=tt.addVertexAndSubdivide(t,s,r),s=p[0],c=p[1]),n===s)return[[],[]];for(m=t.edges_vertices,l=h=0,u=m.length;h<u;l=++h)if(g=m[l],g[0]===n&&g[1]===s||g[0]===s&&g[1]===n)return[[l],[]];return o=t.edges_vertices.push([n,s])-1,o?(d=tt.subdivideCrossingEdges_vertices(t,r,o),0>it.call(d[0],o)&&d[0].push(o)):d=[[o],[]],null!=a&&(v=d[1]).push.apply(v,a),null!=c&&(y=d[1]).push.apply(y,c),d},tt.cutEdges=function(s,d){var a,c,g,h,u,f,p,y,_,x,b,A,L,E,S,P,w,T,j,O,N,D,I,M,C,V,z,X,R,W,B,Y,U,K,Q,Z,G,J,H,$,ee,te,ne,se,re,de,ae,ce,ge;for(ge=[],B=tt.boundaryEdges(s),(E=0,P=B.length);E<P;E++)for(h=B[E],Y=s.edges_vertices[h],(S=0,w=Y.length);S<w;S++)re=Y[S],(null==ge[re]?ge[re]=[]:ge[re]).push(h);for(M=0,T=d.length;M<T;M++){for(u=d[M],f=tt.addEdgeLike(s,u),K=s.edges_vertices[u],(y=C=0,j=K.length);C<j;y=++C)re=K[y],ce=s.vertices_edges[re],ce.splice(ce.indexOf(u)+y,0,f);for(Q=s.edges_vertices[u],y=X=0,O=Q.length;X<O;y=++X)if(de=Q[y],ne=s.edges_vertices[u][1-y],se=s.edges_vertices[f][1-y],g=null==(Z=ge[de])?void 0:Z.length,2<=g){if(2<g)throw new Error(ge[de].length+" boundary edges at vertex "+de);if(G=ge[de],a=G[0],c=G[1],z=s.vertices_edges[de],_=z.indexOf(a),x=z.indexOf(c),x===(_+1)%z.length)0!==x&&(z=z.slice(x).concat(z.slice(0,+_+1||9e9)));else if(_===(x+1)%z.length)0!==_&&(z=z.slice(_).concat(z.slice(0,+x+1||9e9)));else throw new Error("Nonadjacent boundary edges at vertex "+de);for(A=z.indexOf(u),L=z.indexOf(f),b=F(A,L),s.vertices_edges[de]=z.slice(0,+b+1||9e9),ae=tt.addVertexLike(s,de),s.vertices_edges[ae]=z.slice(1+b),J=s.vertices_edges[ae],(R=0,N=J.length);R<N;R++)V=J[R],p=s.edges_vertices[V],p[p.indexOf(de)]=ae}for(null!=(H=s.edges_assignment)&&(H[u]="B"),null!=($=s.edges_assignment)&&($[f]="B"),ee=s.edges_vertices[u],(y=W=0,D=ee.length);W<D;y=++W)re=ee[y],(null==ge[re]?ge[re]=[]:ge[re]).push(u);for(U=s.edges_vertices[f],y=te=0,I=U.length;te<I;y=++te)re=U[y],(null==ge[re]?ge[re]=[]:ge[re]).push(f)}return delete s.vertices_vertices,s},tt.edges_vertices_to_vertices_vertices=function(e){var t,i,n,s,r,d,a,c;for(s=tt.numVertices(e),a=function(){var e,t,i;for(i=[],d=e=0,t=s;0<=t?e<t:e>t;d=0<=t?++e:--e)i.push([]);return i}(),r=e.edges_vertices,(i=0,n=r.length);i<n;i++){for(t=r[i],d=t[0],c=t[1];d>=a.length;)a.push([]);for(;c>=a.length;)a.push([]);a[d].push(c),a[c].push(d)}return a};var st={},rt=function(e,t){return(+e%(t=+t)+t)%t},dt={}.hasOwnProperty;st.edges_vertices_to_vertices_vertices_unsorted=function(e){return e.vertices_vertices=tt.edges_vertices_to_vertices_vertices(e),e},st.edges_vertices_to_vertices_vertices_sorted=function(e){return st.edges_vertices_to_vertices_vertices_unsorted(e),st.sort_vertices_vertices(e)},st.edges_vertices_to_vertices_edges_sorted=function(e){return st.edges_vertices_to_vertices_vertices_sorted(e),st.vertices_vertices_to_vertices_edges(e)},st.sort_vertices_vertices=function(e){var t,i,n,s,r;if(2!==(null==(i=e.vertices_coords)||null==(n=i[0])?void 0:n.length))throw new Error("sort_vertices_vertices: Vertex coordinates missing or not two dimensional");for(r in null==e.vertices_vertices&&st.edges_vertices_to_vertices_vertices(e),s=e.vertices_vertices,s)t=s[r],$e.sortByAngle(t,r,function(t){return e.vertices_coords[t]});return e},st.vertices_vertices_to_faces_vertices=function(e){var t,n,s,r,d,a,c,g,o,h,f,p,m,y,_,b,A,L,E,S;for(f={},p=e.vertices_vertices,(L=s=0,c=p.length);s<c;L=++s)for(h=p[L],n=r=0,g=h.length;r<g;n=++r)b=h[n],f[b+","+L]=h[rt(n-1,h.length)];for(e.faces_vertices=[],m=function(){var e;for(d in e=[],f)e.push(d);return e}(),(a=0,o=m.length);a<o;a++)if(A=m[a],E=f[A],null!=E){for(f[A]=null,y=A.split(","),b=y[0],L=y[1],b=parseInt(b),L=parseInt(L),t=[b,L];E!==t[0];){if(null==E){console.warn("Confusion with face "+t);break}t.push(E),_=[L,E],b=_[0],L=_[1],E=f[b+","+L],f[b+","+L]=null}f[t[t.length-1]+","+t[0]]=null,null!=E&&0<$e.polygonOrientation(function(){var i,n,s;for(s=[],n=0,i=t.length;n<i;n++)S=t[n],s.push(e.vertices_coords[S]);return s}())&&e.faces_vertices.push(t)}return e},st.vertices_edges_to_faces_vertices_edges=function(t){var n,s,r,d,a,c,g,o,h,u,f,p,y,_,b,A,L,E,S,P,w,T;for(b=[],L=t.vertices_edges,(S=c=0,h=L.length);c<h;S=++c)for(_=L[S],b[S]={},(a=g=0,u=_.length);g<u;a=++g)n=_[a],b[S][n]=_[rt(a-1,_.length)];for(t.faces_vertices=[],t.faces_edges=[],(P=o=0,f=b.length);o<f;P=++o)for(s in A=b[P],A)if(r=A[s],null!=r){if(s=parseInt(s),A[s]=null,d=[s],w=[tt.edges_verticesIncident(t.edges_vertices[s],t.edges_vertices[r])],null==w[0])throw new Error("Confusion at edges "+s+" and "+r);for(;r!==d[0];){if(null==r){console.warn("Confusion with face containing edges "+d);break}for(d.push(r),E=t.edges_vertices[r],(y=0,p=E.length);y<p;y++)if(S=E[y],S!==w[w.length-1]){w.push(S);break}s=r,r=b[S][s],b[S][s]=null}null!=r&&0<$e.polygonOrientation(function(){var e,i,s;for(s=[],i=0,e=w.length;i<e;i++)T=w[i],s.push(t.vertices_coords[T]);return s}())&&(t.faces_vertices.push(w),t.faces_edges.push(d))}return t},st.edges_vertices_to_faces_vertices=function(e){return st.edges_vertices_to_vertices_vertices_sorted(e),st.vertices_vertices_to_faces_vertices(e)},st.edges_vertices_to_faces_vertices_edges=function(e){return st.edges_vertices_to_vertices_edges_sorted(e),st.vertices_edges_to_faces_vertices_edges(e)},st.vertices_vertices_to_vertices_edges=function(e){var t,n,s,r,d,a,c,g,l,o,h;for(n={},a=e.edges_vertices,(t=r=0,d=a.length);r<d;t=++r)c=a[t],g=c[0],l=c[1],n[g+","+l]=t,n[l+","+g]=t;return e.vertices_edges=function(){var t,i,r,d;for(r=e.vertices_vertices,d=[],(o=t=0,i=r.length);t<i;o=++t)h=r[o],d.push(function(){var e,t,i;for(i=[],s=e=0,t=h.length;0<=t?e<t:e>t;s=0<=t?++e:--e)i.push(n[o+","+h[s]]);return i}());return d}()},st.faces_vertices_to_faces_edges=function(e){var t,n,s,r,d,a,c,g,l,o,h;for(n={},c=e.edges_vertices,(t=d=0,a=c.length);d<a;t=++d)g=c[t],l=g[0],o=g[1],n[l+","+o]=t,n[o+","+l]=t;return e.faces_edges=function(){var t,i,d,a;for(d=e.faces_vertices,a=[],(s=t=0,i=d.length);t<i;s=++t)h=d[s],a.push(function(){var e,t,i;for(i=[],r=e=0,t=h.length;0<=t?e<t:e>t;r=0<=t?++e:--e)i.push(n[h[r]+","+h[(r+1)%h.length]]);return i}());return a}()},st.faces_vertices_to_edges=function(e){var t,n,s,r,d,a,c,g,l;for(s in e.edges_vertices=[],e.edges_faces=[],e.faces_edges=[],e.edges_assignment=[],n={},a=e.faces_vertices,a)l=a[s],s=parseInt(s),e.faces_edges.push(function(){var i,a,o;for(o=[],r=i=0,a=l.length;i<a;r=++i)c=l[r],c=parseInt(c),g=l[(r+1)%l.length],d=c<=g?c+","+g:g+","+c,d in n?t=n[d]:(t=n[d]=e.edges_vertices.length,c<=g?e.edges_vertices.push([c,g]):e.edges_vertices.push([g,c]),e.edges_faces.push([null,null]),e.edges_assignment.push("B")),c<=g?e.edges_faces[t][0]=s:e.edges_faces[t][1]=s,o.push(t);return o}());return e},st.deepCopy=function(t){var i,n,s,r,d,a,c,g;if("number"===(a=e(t))||"string"===a||"boolean"===a)return t;if(Array.isArray(t)){for(c=[],s=0,d=t.length;s<d;s++)n=t[s],c.push(st.deepCopy(n));return c}for(r in i={},t)dt.call(t,r)&&(g=t[r],i[r]=st.deepCopy(g));return i},st.toJSON=function(e){var t,i,n;return"{\n"+function(){var s=[];for(var r=Object.keys(e),d=0;d<r.length;d++)t=r[d],n=e[t],s.push("  "+JSON.stringify(t)+": "+(Array.isArray(n)?"[\n"+function(){var e,t,s;for(s=[],e=0,t=n.length;e<t;e++)i=n[e],s.push("    "+JSON.stringify(i));return s}().join(",\n")+"\n  ]":JSON.stringify(n)));return s}().join(",\n")+"\n}\n"},st.extensions={},st.converters={},st.getConverter=function(e,t){return e===t?function(e){return e}:st.converters[""+e+t]},st.setConverter=function(e,t,i){return st.extensions[e]=!0,st.extensions[t]=!0,st.converters[""+e+t]=i},st.convertFromTo=function(e,t,i){var n;if("."!==t[0]&&(t="."+t),"."!==i[0]&&(i="."+i),n=st.getConverter(t,i),null==n){if(t===i)return e;throw new Error("No converter from "+t+" to "+i)}return n(e)},st.convertFrom=function(e,t){return st.convertFromTo(e,t,".fold")},st.convertTo=function(e,t){return st.convertFromTo(e,".fold",t)};var at={V:180,v:180,M:-180,m:-180},ct=function(e){return at[e]||0},gt=function(){return{file_spec:1.1,file_creator:"Rabbit Ear",file_classes:["singleModel"],frame_title:"",frame_classes:["creasePattern"],frame_attributes:["2D"],vertices_coords:[],vertices_vertices:[],vertices_faces:[],edges_vertices:[],edges_faces:[],edges_assignment:[],edges_foldAngle:[],edges_length:[],faces_vertices:[],faces_edges:[]}},lt=function(e,t){var i=gt(),n=i.vertices_coords.length,s=Me(e);i.vertices_coords=s.map(function(e){return[[e[0],e[1]],[e[2],e[3]]]}).reduce(function(e,t){return e.concat(t)},i.vertices_coords),i.edges_vertices=s.map(function(e,t){return[n+2*t,n+2*t+1]}),i.edges_assignment=s.map(function(e){return e[4]}).map(function(e){return null==e?"U":ze(e.stroke)});var r=He(i,t.epsilon);return st.edges_vertices_to_vertices_vertices_sorted(r),st.vertices_vertices_to_faces_vertices(r),st.faces_vertices_to_faces_edges(r),r.edges_foldAngle=r.edges_assignment.map(function(e){return ct(e)}),r},ot=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var i=new Z.DOMParser().parseFromString(e,"text/xml").documentElement;return lt(i,t)}return lt(e,t)};return ot.core={segmentize:function(){},fragment:He},ot});
